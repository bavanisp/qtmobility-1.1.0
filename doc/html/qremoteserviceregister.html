<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- qremoteserviceregister.cpp -->
  <title>Qt Mobility 1.1: QRemoteServiceRegister Class Reference</title>
  <link rel="stylesheet" type="text/css" href="style/style.css"
 />  <!--[if IE]>
<meta name="MSSmartTagsPreventParsing" content="true">
<meta http-equiv="imagetoolbar" content="no">
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie6.css">
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie7.css">
<![endif]-->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="style/style_ie8.css">
<![endif]-->
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
 <script src="./scripts/superfish.js" type="text/javascript"></script>
 <script src="./scripts/narrow.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="style/superfish.css" />  <link rel="stylesheet" type="text/css" href="style/narrow.css" /></head>
<body class="" onload="CheckEmptyAndLoadList();">
 <div class="header" id="qtdocheader">
    <div class="content"> 
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Mobility Reference Documentation</span></a>
		<div id="narrowsearch"><form onsubmit="return false;" action="" id="qtdocsearchTop">
		<fieldset>
		<input type="text" value="" id="pageType2" name="searchstring"/>
		 </fieldset>
		</form></div>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.nokia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://developer.qt.nokia.com/">DEV</a></li>
        <li class="nav-topright-labs"><a href="http://labs.qt.nokia.com/blogs/">LABS</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://doc.qt.nokia.com/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.nokia.com/">BLOG</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Mobility 1.1</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://doc.qt.nokia.com">ALL VERSIONS        </a></li>
      </ul>
     </div>
 <ul class="sf-menu sf-js-enabled sf-shadow" id="narrowmenu"> 
		 <li><a href="#">API Lookup</a> 
			 <ul id="topmenuLook"> 
			   <li><a href="classes.html">Class index</a></li> 
 			  <li><a href="functions.html">Function index</a></li> 
			   <li><a href="modules.html">Modules</a></li> 
			   </ul> 
		 </li> 
		 <li><a href="#">Examples</a> 
			 <ul id="topmenuexample"> 
				 <li><a href="all-examples.html">Examples</a></li> 
			 </ul> 
		 </li> 
 </ul> 
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search">
          <form id="qtdocsearch" action="" onsubmit="return false;">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2 title="API Lookup"><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="index.html#platform-compatibility">Platform Compatibility</a></li>
              <li class="defaultLink"><a href="qml-plugins.html">QML Plugins</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2 title="Qt Topics"><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
              <li class="defaultLink"><a href="http://doc.qt.nokia.com/4.7-snapshot/">Qt 4.7</a></li>
              <li class="defaultLink"><a href="http://doc.qt.nokia.com/4.7-snapshot/qt-basic-concepts.html">Basic Qt architecture</a></li>
              <li class="defaultLink"><a href="http://doc.qt.nokia.com/4.7-snapshot/declarativeui.html">Device UI's &amp; Qt Quick</a></li>
              <li class="defaultLink"><a href="http://doc.qt.nokia.com/4.7-snapshot/qt-gui-concepts.html">Desktop UI components</a></li>
              <li class="defaultLink"><a href="http://doc.qt.nokia.com/4.7-snapshot/platform-specific.html">Platform-specific info</a></li>
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2 title="Examples"><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Bread crumbs goes here -->
              <li><a href="modules.html">Modules</a></li>              <li><a href="qtserviceframework.html">QtServiceFramework</a></li>
              <li>QRemoteServiceRegister</li>
            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
          </div>
        </div>
        <div class="content">
<div class="toc">
<h3>Contents</h3>
<ul>
<li class="level1"><a href="#public-types">Public Types</a></li>
<li class="level1"><a href="#properties">Properties</a></li>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#signals">Signals</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<h1 class="title">QRemoteServiceRegister Class Reference</h1>
<p>The QRemoteServiceRegister class manages instances of remote service objects. <a href="#details">More...</a></p>
<pre class="highlightedCode brush: cpp"> #include &lt;QRemoteServiceRegister&gt;</pre><p>Inherits <a href="http://qt.nokia.com/doc/4.6/qobject.html">QObject</a>.</p>
<ul>
<li><a href="qremoteserviceregister-members.html">List of all members, including inherited members</a></li>
</ul>
<hr />
<a name="public-types"></a>
<h2>Public Types</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> class </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister-entry.html">Entry</a></b></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#InstanceType-enum">InstanceType</a></b> { GlobalInstance, PrivateInstance }</td></tr>
</table>
<hr />
<a name="properties"></a>
<h2>Properties</h2>
<ul>
<li class="fn"><b><a href="qremoteserviceregister.html#quitOnLastInstanceClosed-prop">quitOnLastInstanceClosed</a></b> : bool</li>
</ul>
<ul>
<li class="fn">1 property inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#properties">QObject</a></li>
</ul>
<hr />
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#QRemoteServiceRegister">QRemoteServiceRegister</a></b> ( QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#dtor.QRemoteServiceRegister">~QRemoteServiceRegister</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Entry </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#createEntry">createEntry</a></b> ( const QString &amp; <i>serviceName</i>, const QString &amp; <i>interfaceName</i>, const QString &amp; <i>version</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#publishEntries">publishEntries</a></b> ( const QString &amp; <i>ident</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#quitOnLastInstanceClosed-prop">quitOnLastInstanceClosed</a></b> () const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#quitOnLastInstanceClosed-prop">setQuitOnLastInstanceClosed</a></b> ( const bool <i>quit</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> SecurityFilter </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#setSecurityFilter">setSecurityFilter</a></b> ( SecurityFilter <i>filter</i> )</td></tr>
</table>
<ul>
<li class="fn">29 public functions inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#public-functions">QObject</a></li>
</ul>
<hr />
<a name="signals"></a>
<h2>Signals</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#allInstancesClosed">allInstancesClosed</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qremoteserviceregister.html#instanceClosed">instanceClosed</a></b> ( const QRemoteServiceRegister::Entry &amp; <i>entry</i> )</td></tr>
</table>
<ul>
<li class="fn">1 signal inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#signals">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li class="fn">1 public slot inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#public-slots">QObject</a></li>
<li class="fn">1 public variable inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#public-variables">QObject</a></li>
<li class="fn">4 static public members inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#static-public-members">QObject</a></li>
<li class="fn">7 protected functions inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#protected-functions">QObject</a></li>
<li class="fn">2 protected variables inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<div class="descr"/>
<h2>Detailed Description</h2>
<p>The QRemoteServiceRegister class manages instances of remote service objects.</p>
<p>This class registers and publishes IPC based service objects. It owns the service's objects and uess the platform specific IPC mechanism to publish the service.</p>
<p>In order for the remote services to be discoverable by <a href="qservicemanager.html">QServiceManager</a> each <a href="qremoteserviceregister-entry.html">QRemoteServiceRegister::Entry</a> must be registered with the same information in the XML description, otherwise no corresponding <a href="qserviceinterfacedescriptor.html">QServiceInterfaceDescriptor</a> can be found.</p>
<p>The following XML descriptor is used for subsequent examples.</p>
<pre class="highlightedCode brush: cpp"> &lt;SFW version=&quot;1.1&quot;&gt;
 &lt;service&gt;
     &lt;name&gt;MyService&lt;/name&gt;
     &lt;ipcaddress&gt;my_executable&lt;/ipcaddress&gt;
     &lt;description&gt;My service example&lt;/description&gt;
     &lt;interface&gt;
         &lt;name&gt;com.nokia.qt.example.myService&lt;/name&gt;
         &lt;version&gt;1.0&lt;/version&gt;
         &lt;description&gt;My private service&lt;/description&gt;
         &lt;capabilities&gt;&lt;/capabilities&gt;
     &lt;/interface&gt;
 &lt;/service&gt;
 &lt;/SFW&gt;</pre>
<p>The snippet belows demonstrates how an application can register the class <i>MyClass</i> as a remote service, which is published and accessible to clients who wish to load service object instances.</p>
<pre class="highlightedCode brush: cpp"> int main(int argc, char** argv)
 {
     QCoreApplication app(argc, argv);

     QRemoteServiceRegister *serviceRegister = new QRemoteServiceRegister();

     QRemoteServiceRegister::Entry myService;
     myService = serviceRegister-&gt;createEntry&lt;MyClass&gt;(
         &quot;MyService&quot;, &quot;com.nokia.qt.example.myservice&quot;, &quot;1.0&quot;);

     serviceRegister-&gt;publishEntries(&quot;my_service&quot;);

     return app.exec();
     delete serviceRegister;
 }</pre>
<p>By default all entries are created as <a href="qremoteserviceregister.html#InstanceType-enum">QRemoteServiceRegister::GlobalInstance</a> types. This can be changed by calling <a href="qremoteserviceregister-entry.html#setInstantiationType">QRemoteServiceRegister::Entry::setInstantiationType</a>() on the entry. Once the service register has been published the associated service entries can no longer be changed.</p>
</div>
<p>See also <a href="qremoteserviceregister-entry.html">QRemoteServiceRegister::Entry</a>.</p>
<hr />
<div class="types"/>
<h2>Member Type Documentation</h2>
<h3 class="fn"><a name="InstanceType-enum"></a>enum QRemoteServiceRegister::InstanceType</h3>
<p>Defines the two types of instances for a registration entry</p>
<table class="valuelist"><tr class="odd"><tr><th>Constant</th><th>Value</th><th>Description</th></tr>
<tr><td  class="topAlign"><tt>QRemoteServiceRegister::GlobalInstance</tt></td><td class=" topAlign"><tt>0</tt></td><td  class="topAlign">New requests for a service gets the same service instance</td></tr>
<tr><td  class="topAlign"><tt>QRemoteServiceRegister::PrivateInstance</tt></td><td class=" topAlign"><tt>1</tt></td><td  class="topAlign">New requests for a service gets a new service instance</td></tr>
</table>
</div>
<hr />
<div class="prop"/>
<h2>Property Documentation</h2>
<h3 class="fn"><a name="quitOnLastInstanceClosed-prop"></a>quitOnLastInstanceClosed : bool</h3>
<p>This property holds terminate the service when all clients have closed all objects. Default value is true.</p>
<p><b>Access functions:</b></p>
<table class="alignedsummary">
<tr><td class="memItemLeft topAlign rightAlign"> bool </td><td class="memItemRight bottomAlign"><b>quitOnLastInstanceClosed</b> () const</td></tr>
<tr><td class="memItemLeft topAlign rightAlign"> void </td><td class="memItemRight bottomAlign"><b>setQuitOnLastInstanceClosed</b> ( const bool <i>quit</i> )</td></tr>
</table>
</div>
<hr />
<div class="func"/>
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QRemoteServiceRegister"></a>QRemoteServiceRegister::QRemoteServiceRegister ( <a href="http://qt.nokia.com/doc/4.6/qobject.html">QObject</a> * <i>parent</i> = 0 )</h3>
<p>Creates a service register instance with the given <i>parent</i>.</p>
<h3 class="fn"><a name="dtor.QRemoteServiceRegister"></a>QRemoteServiceRegister::~QRemoteServiceRegister ()</h3>
<p>Destroys the service register instance</p>
<h3 class="fn"><a name="allInstancesClosed"></a>void QRemoteServiceRegister::allInstancesClosed ()<tt> [signal]</tt></h3>
<p>This signal is emitted whenever all service instances have been closed. This indicates that the last connected client has either shutdown or released the loaded service object.</p>
<p>See also <a href="qremoteserviceregister.html#instanceClosed">instanceClosed</a>().</p>
<h3 class="fn"><a name="createEntry"></a><a href="qremoteserviceregister-entry.html">Entry</a> QRemoteServiceRegister::createEntry ( const <a href="http://qt.nokia.com/doc/4.6/qstring.html">QString</a> &amp; <i>serviceName</i>, const <a href="http://qt.nokia.com/doc/4.6/qstring.html">QString</a> &amp; <i>interfaceName</i>, const <a href="http://qt.nokia.com/doc/4.6/qstring.html">QString</a> &amp; <i>version</i> )</h3>
<p>Creates an entry on our remote instance manager. The <i>serviceName</i>, <i>interfaceName</i> and <i>version</i> must match the service XML descriptor in order for the remote service to be discoverable.</p>
<p>See also <a href="qremoteserviceregister.html#publishEntries">publishEntries</a>().</p>
<h3 class="fn"><a name="instanceClosed"></a>void QRemoteServiceRegister::instanceClosed ( const <a href="qremoteserviceregister-entry.html">QRemoteServiceRegister::Entry</a> &amp; <i>entry</i> )<tt> [signal]</tt></h3>
<p>This signal is emitted whenever a created instance has been closed. This indicates that a connected client has either shutdown or released the loaded service object.</p>
<p><i>entry</i> is supplied to identify which registered service entry the closed instance belonged to.</p>
<p>See also <a href="qremoteserviceregister.html#allInstancesClosed">allInstancesClosed</a>().</p>
<h3 class="fn"><a name="publishEntries"></a>void QRemoteServiceRegister::publishEntries ( const <a href="http://qt.nokia.com/doc/4.6/qstring.html">QString</a> &amp; <i>ident</i> )</h3>
<p>Publishes every service <a href="qremoteserviceregister-entry.html">QRemoteServiceRegister::Entry</a> that has been created using <a href="qremoteserviceregister.html#createEntry">createEntry</a>(). The <i>ident</i> is the service specific IPC address under which the service can be reached.</p>
<p>This address must match the address provided in the services XML descriptor, otherwise the service will not be discoverable. In some cases this may also cause the IPC rendezvous feature to fail.</p>
<p>See also <a href="qremoteserviceregister.html#createEntry">createEntry</a>().</p>
<h3 class="fn"><a name="setSecurityFilter"></a>SecurityFilter QRemoteServiceRegister::setSecurityFilter ( SecurityFilter <i>filter</i> )</h3>
<p>Allows a security filter to be set which can access QRemoteServiceRegister::QRemoteServiceRegisterCredentials.</p>
<p>The <i>filter</i> is a function pointer where the function code implements possible permission checks and returns true or false. If a connecting client fails the security filter it will be denied access and unable to obtain a valid service instance.</p>
<p>The following snippet is an example of how to use the security filter feature.</p>
<pre class="highlightedCode brush: cpp"> bool myFunction(const void *p)
 {
     const QRemoteServiceRegisterCredentials *cred =
         (const struct QRemoteServiceRegisterCredentials *)p;

     <span class="comment">// allow the superuser</span>
     if (cred-&gt;uid == 0)
         return true;

     return false;
 }

 int main(int argc, char** argv)
 {
     ...

     QRemoteServiceRegister* serviceRegister = new QRemoteServiceRegister();
     service-&gt;setSecurityFilter(myFunction);

     ...
 }</pre>
</div>
        <!-- /div -->
        <div class="feedback t_button">
          [+] Documentation Feedback</div>
      </div>
    </div>
    <div class="ft">
      <span></span>
    </div>
  </div> 
  </div> 
  <div class="footer">
    <p>
      <acronym title="Copyright">&copy;</acronym> 2008-2010 Nokia Corporation and/or its
      subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
      in Finland and/or other countries worldwide.</p>
    <p>
      All other trademarks are property of their respective owners. <a title="Privacy Policy"
        href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
  </div>
  <div id="feedbackBox">
      <div id="feedcloseX" class="feedclose t_button">X</div>
    <form id="feedform" action="http://doc.qt.nokia.com/docFeedbck/feedback.php" method="get">
      <p id="noteHead">Thank you for giving your feedback.</p> <div class="note"><p>Make sure it is related to this specific page. For more general bugs and 
      requests, please use the <a href="http://bugreports.qt.nokia.com/secure/Dashboard.jspa">Qt Bug Tracker</a>.</p></div>
      <p><textarea id="feedbox" name="feedText" rows="5" cols="40"></textarea></p>
      <p><input id="feedsubmit" class="feedclose" type="submit" name="feedback" /></p>
    </form>
  </div>
  <div id="blurpage">
  </div>
  </div>
  <script src="scripts/functions.js" type="text/javascript"></script>
</body>
</html>
